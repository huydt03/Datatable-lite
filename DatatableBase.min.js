function DataTableBase(t,e={},n=Function()){function a(t,e){"function"==typeof i[t]&&i[t](e)}function o(t){let o={data:{},update:function t(e,i=1){r(e=i?{...o.data,...e}:e),a("onItemUpdate",o),n()}};function r(t){for(let n in e)t[n]=t[n]||"";o.data=t}return r(t),o}let r=[],i={data:t,items:r,add:function t(e,c=0){let u=o(e,c);r.splice(c,0,u),a("onAdd",{self:i,item:u,index:c}),n(i)},update:function t(e,c){for(let u in a("onBeforeUpdate",i),r=c?r:[],e){let l=o(e[u]);r.push(l)}a("onAfterUpdate",i),n(i)},remove:function t(e){let o=r[e];r.splice(e,1),a("onRemove",{self:i,item:o}),n(i)},clear:function t(){r=[],a("onClear",i),n(i)},swap:function t(e,o){let c=r[e],u=r[o];r[e]=u,r[o]=c,a("onSwap",{self:i,from:c,to:u}),n(i)},sort:function t(e,o){o?i.items.sort(function(t,n){return t=t.data[e],(n=n.data[e]).localeCompare?n.localeCompare(t):n-t}):i.items.sort(function(t,n){return t=t.data[e],n=n.data[e],t.localeCompare?t.localeCompare(n):t-n}),a("onSort",i),n(i)},search:function t(o){let r=i.items.filter((t,n)=>{let a="";for(let r in e)e[r].searchable&&(a+=t.data[r]+",");return a.includes(o)?t:""});a("onSearch",{self:i,items:r}),n({items:r})}};return Object.defineProperties(i,{items:{get:function(){return r}},data:{get:function(){let t;return t=[],r.forEach(e=>{t.push(e.data)}),t}}}),i}
